**MCP's 1st Birthday Hackathon**

[Watch Now ‚Üí](https://www.youtube.com/watch?v=6C2JRt2Wi5o)

[![Gradio logo](/_app/immutable/assets/gradio.CHB5adID.svg)](/)  [‚ö° Quickstart](/guides/quickstart) [‚úçÔ∏è Docs](/docs) [üé¢ Playground](/playground) [üñºÔ∏è Custom Components](/custom-components/gallery)

üñê Community

Search Search

‚åòK

Getting Started

[Quickstart](../guides/quickstart/)

Building Interfaces

[The Interface Class](../guides/the-interface-class/)[More On Examples](../guides/more-on-examples/)[Flagging](../guides/flagging/)[Interface State](../guides/interface-state/)[Reactive Interfaces](../guides/reactive-interfaces/)[Four Kinds Of Interfaces](../guides/four-kinds-of-interfaces/)

Building With Blocks

[Blocks And Event Listeners](../guides/blocks-and-event-listeners/)[Controlling Layout](../guides/controlling-layout/)[State In Blocks](../guides/state-in-blocks/)[Dynamic Apps With Render Decorator](../guides/dynamic-apps-with-render-decorator/)[More Blocks Features](../guides/more-blocks-features/)[Custom CSS And JS](../guides/custom-CSS-and-JS/)[Using Blocks Like Functions](../guides/using-blocks-like-functions/)

Additional Features

[Queuing](../guides/queuing/)[Streaming Outputs](../guides/streaming-outputs/)[Streaming Inputs](../guides/streaming-inputs/)[Alerts](../guides/alerts/)[Progress Bars](../guides/progress-bars/)[Batch Functions](../guides/batch-functions/)[Sharing Your App](../guides/sharing-your-app/)[File Access](../guides/file-access/)[Multipage Apps](../guides/multipage-apps/)[Environment Variables](../guides/environment-variables/)[Resource Cleanup](../guides/resource-cleanup/)[Themes](../guides/themes/)[Client Side Functions](../guides/client-side-functions/)[View Api Page](../guides/view-api-page/)[Internationalization](../guides/internationalization/)

Chatbots

[Creating A Chatbot Fast](../guides/creating-a-chatbot-fast/)[Chatinterface Examples](../guides/chatinterface-examples/)[Agents And Tool Usage](../guides/agents-and-tool-usage/)[Creating A Custom Chatbot With Blocks](../guides/creating-a-custom-chatbot-with-blocks/)[Chatbot Specific Events](../guides/chatbot-specific-events/)[Creating A Discord Bot From A Gradio App](../guides/creating-a-discord-bot-from-a-gradio-app/)[Creating A Slack Bot From A Gradio App](../guides/creating-a-slack-bot-from-a-gradio-app/)[Creating A Website Widget From A Gradio Chatbot](../guides/creating-a-website-widget-from-a-gradio-chatbot/)

Data Science And Plots

[Creating Plots](../guides/creating-plots/)[Time Plots](../guides/time-plots/)[Filters Tables And Stats](../guides/filters-tables-and-stats/)[Connecting To A Database](../guides/connecting-to-a-database/)

Streaming

[Streaming Ai Generated Audio](../guides/streaming-ai-generated-audio/)[Object Detection From Webcam With Webrtc](../guides/object-detection-from-webcam-with-webrtc/)[Object Detection From Video](../guides/object-detection-from-video/)[Conversational Chatbot](../guides/conversational-chatbot/)[Real Time Speech Recognition](../guides/real-time-speech-recognition/)[Automatic Voice Detection](../guides/automatic-voice-detection/)

Custom Components

[Custom Components In Five Minutes](../guides/custom-components-in-five-minutes/)[Key Component Concepts](../guides/key-component-concepts/)[Configuration](../guides/configuration/)[Backend](../guides/backend/)[Frontend](../guides/frontend/)[Frequently Asked Questions](../guides/frequently-asked-questions/)[Pdf Component Example](../guides/pdf-component-example/)[Multimodal Chatbot Part1](../guides/multimodal-chatbot-part1/)[Documenting Custom Components](../guides/documenting-custom-components/)

Gradio Clients And Lite

[Getting Started With The Python Client](../guides/getting-started-with-the-python-client/)[Getting Started With The Js Client](../guides/getting-started-with-the-js-client/)[Querying Gradio Apps With Curl](../guides/querying-gradio-apps-with-curl/)[Gradio And Llm Agents](../guides/gradio-and-llm-agents/)[Fastapi App With The Gradio Client](../guides/fastapi-app-with-the-gradio-client/)

Mcp

[Building Mcp Server With Gradio](../guides/building-mcp-server-with-gradio/)[File Upload Mcp](../guides/file-upload-mcp/)[Building An Mcp Client With Gradio](../guides/building-an-mcp-client-with-gradio/)[Using Docs Mcp](../guides/using-docs-mcp/)

Other Tutorials

[Using Hugging Face Integrations](../guides/using-hugging-face-integrations/)[Gradio And Comet](../guides/Gradio-and-Comet/)[Gradio And ONNX On Hugging Face](../guides/Gradio-and-ONNX-on-Hugging-Face/)[Gradio And Wandb Integration](../guides/Gradio-and-Wandb-Integration/)[Create Immersive Demo](../guides/create-immersive-demo/)[Create Your Own Friends With A Gan](../guides/create-your-own-friends-with-a-gan/)[Creating A Dashboard From Bigquery Data](../guides/creating-a-dashboard-from-bigquery-data/)[Creating A Dashboard From Supabase Data](../guides/creating-a-dashboard-from-supabase-data/)[Creating A Realtime Dashboard From Google Sheets](../guides/creating-a-realtime-dashboard-from-google-sheets/)[Deploying Gradio With Disco](../guides/deploying-gradio-with-disco/)[Deploying Gradio With Docker](../guides/deploying-gradio-with-docker/)[Deploying Gradio With Modal](../guides/deploying-gradio-with-modal/)[Developing Faster With Reload Mode](../guides/developing-faster-with-reload-mode/)[From Openapi Spec](../guides/from-openapi-spec/)[Gradio 6 Migration Guide](../guides/gradio-6-migration-guide/)[How To Use 3D Model Component](../guides/how-to-use-3D-model-component/)[Image Classification In Pytorch](../guides/image-classification-in-pytorch/)[Image Classification With Vision Transformers](../guides/image-classification-with-vision-transformers/)[Installing Gradio In A Virtual Environment](../guides/installing-gradio-in-a-virtual-environment/)[Named Entity Recognition](../guides/named-entity-recognition/)[Plot Component For Maps](../guides/plot-component-for-maps/)[Running Background Tasks](../guides/running-background-tasks/)[Running Gradio On Your Web Server With Nginx](../guides/running-gradio-on-your-web-server-with-nginx/)[Setting Up A Demo For Maximum Performance](../guides/setting-up-a-demo-for-maximum-performance/)[Styling The Gradio Dataframe](../guides/styling-the-gradio-dataframe/)[Theming Guide](../guides/theming-guide/)[Understanding Gradio Share Links](../guides/understanding-gradio-share-links/)[Using Flagging](../guides/using-flagging/)[Using Gradio For Tabular Workflows](../guides/using-gradio-for-tabular-workflows/)[Using Gradio In Other Programming Languages](../guides/using-gradio-in-other-programming-languages/)[Wrapping Layouts](../guides/wrapping-layouts/)

5.49.14.44.1main

Getting Started

[Quickstart](../guides/quickstart/)

Building Interfaces

[The Interface Class](../guides/the-interface-class/)[More On Examples](../guides/more-on-examples/)[Flagging](../guides/flagging/)[Interface State](../guides/interface-state/)[Reactive Interfaces](../guides/reactive-interfaces/)[Four Kinds Of Interfaces](../guides/four-kinds-of-interfaces/)

Building With Blocks

[Blocks And Event Listeners](../guides/blocks-and-event-listeners/)[Controlling Layout](../guides/controlling-layout/)[State In Blocks](../guides/state-in-blocks/)[Dynamic Apps With Render Decorator](../guides/dynamic-apps-with-render-decorator/)[More Blocks Features](../guides/more-blocks-features/)[Custom CSS And JS](../guides/custom-CSS-and-JS/)[Using Blocks Like Functions](../guides/using-blocks-like-functions/)

Additional Features

[Queuing](../guides/queuing/)[Streaming Outputs](../guides/streaming-outputs/)[Streaming Inputs](../guides/streaming-inputs/)[Alerts](../guides/alerts/)[Progress Bars](../guides/progress-bars/)[Batch Functions](../guides/batch-functions/)[Sharing Your App](../guides/sharing-your-app/)[File Access](../guides/file-access/)[Multipage Apps](../guides/multipage-apps/)[Environment Variables](../guides/environment-variables/)[Resource Cleanup](../guides/resource-cleanup/)[Themes](../guides/themes/)[Client Side Functions](../guides/client-side-functions/)[View Api Page](../guides/view-api-page/)[Internationalization](../guides/internationalization/)

Chatbots

[Creating A Chatbot Fast](../guides/creating-a-chatbot-fast/)[Chatinterface Examples](../guides/chatinterface-examples/)[Agents And Tool Usage](../guides/agents-and-tool-usage/)[Creating A Custom Chatbot With Blocks](../guides/creating-a-custom-chatbot-with-blocks/)[Chatbot Specific Events](../guides/chatbot-specific-events/)[Creating A Discord Bot From A Gradio App](../guides/creating-a-discord-bot-from-a-gradio-app/)[Creating A Slack Bot From A Gradio App](../guides/creating-a-slack-bot-from-a-gradio-app/)[Creating A Website Widget From A Gradio Chatbot](../guides/creating-a-website-widget-from-a-gradio-chatbot/)

Data Science And Plots

[Creating Plots](../guides/creating-plots/)[Time Plots](../guides/time-plots/)[Filters Tables And Stats](../guides/filters-tables-and-stats/)[Connecting To A Database](../guides/connecting-to-a-database/)

Streaming

[Streaming Ai Generated Audio](../guides/streaming-ai-generated-audio/)[Object Detection From Webcam With Webrtc](../guides/object-detection-from-webcam-with-webrtc/)[Object Detection From Video](../guides/object-detection-from-video/)[Conversational Chatbot](../guides/conversational-chatbot/)[Real Time Speech Recognition](../guides/real-time-speech-recognition/)[Automatic Voice Detection](../guides/automatic-voice-detection/)

Custom Components

[Custom Components In Five Minutes](../guides/custom-components-in-five-minutes/)[Key Component Concepts](../guides/key-component-concepts/)[Configuration](../guides/configuration/)[Backend](../guides/backend/)

[Which Class to Inherit From](#which-class-to-inherit-from)[The methods you need to implement](#the-methods-you-need-to-implement)[preprocess and postprocess](#preprocess-and-postprocess)[process\_example](#process-example)[api\_info](#api-info)[example\_payload](#example-payload)[example\_value](#example-value)[flag](#flag)[read\_from\_flag](#read-from-flag)[The data\_model](#the-data-model)[Handling Files](#handling-files)[Adding Event Triggers To Your Component](#adding-event-triggers-to-your-component)[Conclusion](#conclusion)

[Frontend](../guides/frontend/)[Frequently Asked Questions](../guides/frequently-asked-questions/)[Pdf Component Example](../guides/pdf-component-example/)[Multimodal Chatbot Part1](../guides/multimodal-chatbot-part1/)[Documenting Custom Components](../guides/documenting-custom-components/)

Gradio Clients And Lite

[Getting Started With The Python Client](../guides/getting-started-with-the-python-client/)[Getting Started With The Js Client](../guides/getting-started-with-the-js-client/)[Querying Gradio Apps With Curl](../guides/querying-gradio-apps-with-curl/)[Gradio And Llm Agents](../guides/gradio-and-llm-agents/)[Fastapi App With The Gradio Client](../guides/fastapi-app-with-the-gradio-client/)

Mcp

[Building Mcp Server With Gradio](../guides/building-mcp-server-with-gradio/)[File Upload Mcp](../guides/file-upload-mcp/)[Building An Mcp Client With Gradio](../guides/building-an-mcp-client-with-gradio/)[Using Docs Mcp](../guides/using-docs-mcp/)

Other Tutorials [ show ]

[Using Hugging Face Integrations](../guides/using-hugging-face-integrations/)[Gradio And Comet](../guides/Gradio-and-Comet/)[Gradio And ONNX On Hugging Face](../guides/Gradio-and-ONNX-on-Hugging-Face/)[Gradio And Wandb Integration](../guides/Gradio-and-Wandb-Integration/)[Create Immersive Demo](../guides/create-immersive-demo/)[Create Your Own Friends With A Gan](../guides/create-your-own-friends-with-a-gan/)[Creating A Dashboard From Bigquery Data](../guides/creating-a-dashboard-from-bigquery-data/)[Creating A Dashboard From Supabase Data](../guides/creating-a-dashboard-from-supabase-data/)[Creating A Realtime Dashboard From Google Sheets](../guides/creating-a-realtime-dashboard-from-google-sheets/)[Deploying Gradio With Disco](../guides/deploying-gradio-with-disco/)[Deploying Gradio With Docker](../guides/deploying-gradio-with-docker/)[Deploying Gradio With Modal](../guides/deploying-gradio-with-modal/)[Developing Faster With Reload Mode](../guides/developing-faster-with-reload-mode/)[From Openapi Spec](../guides/from-openapi-spec/)[Gradio 6 Migration Guide](../guides/gradio-6-migration-guide/)[How To Use 3D Model Component](../guides/how-to-use-3D-model-component/)[Image Classification In Pytorch](../guides/image-classification-in-pytorch/)[Image Classification With Vision Transformers](../guides/image-classification-with-vision-transformers/)[Installing Gradio In A Virtual Environment](../guides/installing-gradio-in-a-virtual-environment/)[Named Entity Recognition](../guides/named-entity-recognition/)[Plot Component For Maps](../guides/plot-component-for-maps/)[Running Background Tasks](../guides/running-background-tasks/)[Running Gradio On Your Web Server With Nginx](../guides/running-gradio-on-your-web-server-with-nginx/)[Setting Up A Demo For Maximum Performance](../guides/setting-up-a-demo-for-maximum-performance/)[Styling The Gradio Dataframe](../guides/styling-the-gradio-dataframe/)[Theming Guide](../guides/theming-guide/)[Understanding Gradio Share Links](../guides/understanding-gradio-share-links/)[Using Flagging](../guides/using-flagging/)[Using Gradio For Tabular Workflows](../guides/using-gradio-for-tabular-workflows/)[Using Gradio In Other Programming Languages](../guides/using-gradio-in-other-programming-languages/)[Wrapping Layouts](../guides/wrapping-layouts/)

1. Custom Components
2. Backend

[‚Üê

Configuration](../guides/configuration/) [Frontend

‚Üí](../guides/frontend/)

# The Backend üêç

This guide will cover everything you need to know to implement your custom component's backend processing.

## Which Class to Inherit From[![](data:image/svg+xml...)](#which-class-to-inherit-from)

All components inherit from one of three classes `Component`, `FormComponent`, or `BlockContext`.
You need to inherit from one so that your component behaves like all other gradio components.
When you start from a template with `gradio cc create --template`, you don't need to worry about which one to choose since the template uses the correct one.
For completeness, and in the event that you need to make your own component from scratch, we explain what each class is for.

* `FormComponent`: Use this when you want your component to be grouped together in the same `Form` layout with other `FormComponents`. The `Slider`, `Textbox`, and `Number` components are all `FormComponents`.
* `BlockContext`: Use this when you want to place other components "inside" your component. This enabled `with MyComponent() as component:` syntax.
* `Component`: Use this for all other cases.

  **Tip:**

  If your component supports streaming output, inherit from the `StreamingOutput` class.

  **Tip:**

  If you inherit from `BlockContext`, you also need to set the metaclass to be `ComponentMeta`. See example below.

```
from gradio.blocks import BlockContext
from gradio.component_meta import ComponentMeta

@document()
class Row(BlockContext, metaclass=ComponentMeta):
    pass
```

## The methods you need to implement[![](data:image/svg+xml...)](#the-methods-you-need-to-implement)

When you inherit from any of these classes, the following methods must be implemented.
Otherwise the Python interpreter will raise an error when you instantiate your component!

### `preprocess` and `postprocess`[![](data:image/svg+xml...)](#preprocess-and-postprocess)

Explained in the [Key Concepts](./key-component-concepts#the-value-and-how-it-is-preprocessed-postprocessed) guide.
They handle the conversion from the data sent by the frontend to the format expected by the python function.

```
    def preprocess(self, x: Any) -> Any:
        """
        Convert from the web-friendly (typically JSON) value in the frontend to the format expected by the python function.
        """
        return x

    def postprocess(self, y):
        """
        Convert from the data returned by the python function to the web-friendly (typically JSON) value expected by the frontend.
        """
        return y
```

### `process_example`[![](data:image/svg+xml...)](#process-example)

Takes in the original Python value and returns the modified value that should be displayed in the examples preview in the app.
If not provided, the `.postprocess()` method is used instead. Let's look at the following example from the `SimpleDropdown` component.

```
def process_example(self, input_data):
    return next((c[0] for c in self.choices if c[1] == input_data), None)
```

Since `self.choices` is a list of tuples corresponding to (`display_name`, `value`), this converts the value that a user provides to the display value (or if the value is not present in `self.choices`, it is converted to `None`).

### `api_info`[![](data:image/svg+xml...)](#api-info)

A JSON-schema representation of the value that the `preprocess` expects.
This powers api usage via the gradio clients.
You do **not** need to implement this yourself if you components specifies a `data_model`.
The `data_model` in the following section.

```
def api_info(self) -> dict[str, list[str]]:
    """
    A JSON-schema representation of the value that the `preprocess` expects and the `postprocess` returns.
    """
    pass
```

### `example_payload`[![](data:image/svg+xml...)](#example-payload)

An example payload for your component, e.g. something that can be passed into the `.preprocess()` method
of your component. The example input is displayed in the `View API` page of a Gradio app that uses your custom component.
Must be JSON-serializable. If your component expects a file, it is best to use a publicly accessible URL.

```
def example_payload(self) -> Any:
    """
    The example inputs for this component for API usage. Must be JSON-serializable.
    """
    pass
```

### `example_value`[![](data:image/svg+xml...)](#example-value)

An example value for your component, e.g. something that can be passed into the `.postprocess()` method
of your component. This is used as the example value in the default app that is created in custom component development.

```
def example_payload(self) -> Any:
    """
    The example inputs for this component for API usage. Must be JSON-serializable.
    """
    pass
```

### `flag`[![](data:image/svg+xml...)](#flag)

Write the component's value to a format that can be stored in the `csv` or `json` file used for flagging.
You do **not** need to implement this yourself if you components specifies a `data_model`.
The `data_model` in the following section.

```
def flag(self, x: Any | GradioDataModel, flag_dir: str | Path = "") -> str:
    pass
```

### `read_from_flag`[![](data:image/svg+xml...)](#read-from-flag)

Convert from the format stored in the `csv` or `json` file used for flagging to the component's python `value`.
You do **not** need to implement this yourself if you components specifies a `data_model`.
The `data_model` in the following section.

```
def read_from_flag(
    self,
    x: Any,
) -> GradioDataModel | Any:
    """
    Convert the data from the csv or jsonl file into the component state.
    """
    return x
```

## The `data_model`[![](data:image/svg+xml...)](#the-data-model)

The `data_model` is how you define the expected data format your component's value will be stored in the frontend.
It specifies the data format your `preprocess` method expects and the format the `postprocess` method returns.
It is not necessary to define a `data_model` for your component but it greatly simplifies the process of creating a custom component.
If you define a custom component you only need to implement four methods - `preprocess`, `postprocess`, `example_payload`, and `example_value`!

You define a `data_model` by defining a [pydantic model](https://docs.pydantic.dev/latest/concepts/models/#basic-model-usage) that inherits from either `GradioModel` or `GradioRootModel`.

This is best explained with an example. Let's look at the core `Video` component, which stores the video data as a JSON object with two keys `video` and `subtitles` which point to separate files.

```
from gradio.data_classes import FileData, GradioModel

class VideoData(GradioModel):
    video: FileData
    subtitles: Optional[FileData] = None

class Video(Component):
    data_model = VideoData
```

By adding these four lines of code, your component automatically implements the methods needed for API usage, the flagging methods, and example caching methods!
It also has the added benefit of self-documenting your code.
Anyone who reads your component code will know exactly the data it expects.

**Tip:**

If your component expects files to be uploaded from the frontend, your must use the `FileData` model! It will be explained in the following section.

**Tip:**

Read the pydantic docs [here](https://docs.pydantic.dev/latest/concepts/models/#basic-model-usage).

The difference between a `GradioModel` and a `GradioRootModel` is that the `RootModel` will not serialize the data to a dictionary.
For example, the `Names` model will serialize the data to `{'names': ['freddy', 'pete']}` whereas the `NamesRoot` model will serialize it to `['freddy', 'pete']`.

```
from typing import List

class Names(GradioModel):
    names: List[str]

class NamesRoot(GradioRootModel):
    root: List[str]
```

Even if your component does not expect a "complex" JSON data structure it can be beneficial to define a `GradioRootModel` so that you don't have to worry about implementing the API and flagging methods.

**Tip:**

Use classes from the Python typing library to type your models. e.g. `List` instead of `list`.

## Handling Files[![](data:image/svg+xml...)](#handling-files)

If your component expects uploaded files as input, or returns saved files to the frontend, you **MUST** use the `FileData` to type the files in your `data_model`.

When you use the `FileData`:

* Gradio knows that it should allow serving this file to the frontend. Gradio automatically blocks requests to serve arbitrary files in the computer running the server.
* Gradio will automatically place the file in a cache so that duplicate copies of the file don't get saved.
* The client libraries will automatically know that they should upload input files prior to sending the request. They will also automatically download files.

If you do not use the `FileData`, your component will not work as expected!

## Adding Event Triggers To Your Component[![](data:image/svg+xml...)](#adding-event-triggers-to-your-component)

The events triggers for your component are defined in the `EVENTS` class attribute.
This is a list that contains the string names of the events.
Adding an event to this list will automatically add a method with that same name to your component!

You can import the `Events` enum from `gradio.events` to access commonly used events in the core gradio components.

For example, the following code will define `text_submit`, `file_upload` and `change` methods in the `MyComponent` class.

```
from gradio.events import Events
from gradio.components import FormComponent

class MyComponent(FormComponent):

    EVENTS = [
        "text_submit",
        "file_upload",
        Events.change
    ]
```

**Tip:**

Don't forget to also handle these events in the JavaScript code!

## Conclusion[![](data:image/svg+xml...)](#conclusion)

[‚Üê

Configuration](../guides/configuration/) [Frontend

‚Üí](../guides/frontend/)

[![Gradio logo](/_app/immutable/assets/gradio.CHB5adID.svg)](/)

[Status](https://status.gradio.app) [![Twitter logo](data:image/svg+xml...)](https://twitter.com/Gradio) [![Github logo](data:image/svg+xml...)](https://github.com/gradio-app/gradio)