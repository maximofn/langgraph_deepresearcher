**MCP's 1st Birthday Hackathon**

[Watch Now ‚Üí](https://www.youtube.com/watch?v=6C2JRt2Wi5o)

[![Gradio logo](/_app/immutable/assets/gradio.CHB5adID.svg)](/)  [‚ö° Quickstart](/guides/quickstart) [‚úçÔ∏è Docs](/docs) [üé¢ Playground](/playground) [üñºÔ∏è Custom Components](/custom-components/gallery)

üñê Community

Search Search

‚åòK

Getting Started

[Quickstart](../guides/quickstart/)

Building Interfaces

[The Interface Class](../guides/the-interface-class/)[More On Examples](../guides/more-on-examples/)[Flagging](../guides/flagging/)[Interface State](../guides/interface-state/)[Reactive Interfaces](../guides/reactive-interfaces/)[Four Kinds Of Interfaces](../guides/four-kinds-of-interfaces/)

Building With Blocks

[Blocks And Event Listeners](../guides/blocks-and-event-listeners/)[Controlling Layout](../guides/controlling-layout/)[State In Blocks](../guides/state-in-blocks/)[Dynamic Apps With Render Decorator](../guides/dynamic-apps-with-render-decorator/)[More Blocks Features](../guides/more-blocks-features/)[Custom CSS And JS](../guides/custom-CSS-and-JS/)[Using Blocks Like Functions](../guides/using-blocks-like-functions/)

Additional Features

[Queuing](../guides/queuing/)[Streaming Outputs](../guides/streaming-outputs/)[Streaming Inputs](../guides/streaming-inputs/)[Alerts](../guides/alerts/)[Progress Bars](../guides/progress-bars/)[Batch Functions](../guides/batch-functions/)[Sharing Your App](../guides/sharing-your-app/)[File Access](../guides/file-access/)[Multipage Apps](../guides/multipage-apps/)[Environment Variables](../guides/environment-variables/)[Resource Cleanup](../guides/resource-cleanup/)[Themes](../guides/themes/)[Client Side Functions](../guides/client-side-functions/)[View Api Page](../guides/view-api-page/)[Internationalization](../guides/internationalization/)

Chatbots

[Creating A Chatbot Fast](../guides/creating-a-chatbot-fast/)[Chatinterface Examples](../guides/chatinterface-examples/)[Agents And Tool Usage](../guides/agents-and-tool-usage/)[Creating A Custom Chatbot With Blocks](../guides/creating-a-custom-chatbot-with-blocks/)[Chatbot Specific Events](../guides/chatbot-specific-events/)[Creating A Discord Bot From A Gradio App](../guides/creating-a-discord-bot-from-a-gradio-app/)[Creating A Slack Bot From A Gradio App](../guides/creating-a-slack-bot-from-a-gradio-app/)[Creating A Website Widget From A Gradio Chatbot](../guides/creating-a-website-widget-from-a-gradio-chatbot/)

Data Science And Plots

[Creating Plots](../guides/creating-plots/)[Time Plots](../guides/time-plots/)[Filters Tables And Stats](../guides/filters-tables-and-stats/)[Connecting To A Database](../guides/connecting-to-a-database/)

Streaming

[Streaming Ai Generated Audio](../guides/streaming-ai-generated-audio/)[Object Detection From Webcam With Webrtc](../guides/object-detection-from-webcam-with-webrtc/)[Object Detection From Video](../guides/object-detection-from-video/)[Conversational Chatbot](../guides/conversational-chatbot/)[Real Time Speech Recognition](../guides/real-time-speech-recognition/)[Automatic Voice Detection](../guides/automatic-voice-detection/)

Custom Components

[Custom Components In Five Minutes](../guides/custom-components-in-five-minutes/)[Key Component Concepts](../guides/key-component-concepts/)[Configuration](../guides/configuration/)[Backend](../guides/backend/)[Frontend](../guides/frontend/)[Frequently Asked Questions](../guides/frequently-asked-questions/)[Pdf Component Example](../guides/pdf-component-example/)[Multimodal Chatbot Part1](../guides/multimodal-chatbot-part1/)[Documenting Custom Components](../guides/documenting-custom-components/)

Gradio Clients And Lite

[Getting Started With The Python Client](../guides/getting-started-with-the-python-client/)[Getting Started With The Js Client](../guides/getting-started-with-the-js-client/)[Querying Gradio Apps With Curl](../guides/querying-gradio-apps-with-curl/)[Gradio And Llm Agents](../guides/gradio-and-llm-agents/)[Fastapi App With The Gradio Client](../guides/fastapi-app-with-the-gradio-client/)

Mcp

[Building Mcp Server With Gradio](../guides/building-mcp-server-with-gradio/)[File Upload Mcp](../guides/file-upload-mcp/)[Building An Mcp Client With Gradio](../guides/building-an-mcp-client-with-gradio/)[Using Docs Mcp](../guides/using-docs-mcp/)

Other Tutorials

[Using Hugging Face Integrations](../guides/using-hugging-face-integrations/)[Gradio And Comet](../guides/Gradio-and-Comet/)[Gradio And ONNX On Hugging Face](../guides/Gradio-and-ONNX-on-Hugging-Face/)[Gradio And Wandb Integration](../guides/Gradio-and-Wandb-Integration/)[Create Immersive Demo](../guides/create-immersive-demo/)[Create Your Own Friends With A Gan](../guides/create-your-own-friends-with-a-gan/)[Creating A Dashboard From Bigquery Data](../guides/creating-a-dashboard-from-bigquery-data/)[Creating A Dashboard From Supabase Data](../guides/creating-a-dashboard-from-supabase-data/)[Creating A Realtime Dashboard From Google Sheets](../guides/creating-a-realtime-dashboard-from-google-sheets/)[Deploying Gradio With Disco](../guides/deploying-gradio-with-disco/)[Deploying Gradio With Docker](../guides/deploying-gradio-with-docker/)[Deploying Gradio With Modal](../guides/deploying-gradio-with-modal/)[Developing Faster With Reload Mode](../guides/developing-faster-with-reload-mode/)[From Openapi Spec](../guides/from-openapi-spec/)[How To Use 3D Model Component](../guides/how-to-use-3D-model-component/)[Image Classification In Pytorch](../guides/image-classification-in-pytorch/)[Image Classification With Vision Transformers](../guides/image-classification-with-vision-transformers/)[Installing Gradio In A Virtual Environment](../guides/installing-gradio-in-a-virtual-environment/)[Named Entity Recognition](../guides/named-entity-recognition/)[Plot Component For Maps](../guides/plot-component-for-maps/)[Running Background Tasks](../guides/running-background-tasks/)[Running Gradio On Your Web Server With Nginx](../guides/running-gradio-on-your-web-server-with-nginx/)[Setting Up A Demo For Maximum Performance](../guides/setting-up-a-demo-for-maximum-performance/)[Styling The Gradio Dataframe](../guides/styling-the-gradio-dataframe/)[Theming Guide](../guides/theming-guide/)[Understanding Gradio Share Links](../guides/understanding-gradio-share-links/)[Using Flagging](../guides/using-flagging/)[Using Gradio For Tabular Workflows](../guides/using-gradio-for-tabular-workflows/)[Using Gradio In Other Programming Languages](../guides/using-gradio-in-other-programming-languages/)[Wrapping Layouts](../guides/wrapping-layouts/)

5.49.14.44.1main

Getting Started

[Quickstart](../guides/quickstart/)

Building Interfaces

[The Interface Class](../guides/the-interface-class/)[More On Examples](../guides/more-on-examples/)[Flagging](../guides/flagging/)[Interface State](../guides/interface-state/)[Reactive Interfaces](../guides/reactive-interfaces/)[Four Kinds Of Interfaces](../guides/four-kinds-of-interfaces/)

Building With Blocks

[Blocks And Event Listeners](../guides/blocks-and-event-listeners/)[Controlling Layout](../guides/controlling-layout/)[State In Blocks](../guides/state-in-blocks/)[Dynamic Apps With Render Decorator](../guides/dynamic-apps-with-render-decorator/)[More Blocks Features](../guides/more-blocks-features/)[Custom CSS And JS](../guides/custom-CSS-and-JS/)[Using Blocks Like Functions](../guides/using-blocks-like-functions/)

Additional Features

[Queuing](../guides/queuing/)[Streaming Outputs](../guides/streaming-outputs/)[Streaming Inputs](../guides/streaming-inputs/)[Alerts](../guides/alerts/)[Progress Bars](../guides/progress-bars/)[Batch Functions](../guides/batch-functions/)[Sharing Your App](../guides/sharing-your-app/)[File Access](../guides/file-access/)[Multipage Apps](../guides/multipage-apps/)[Environment Variables](../guides/environment-variables/)[Resource Cleanup](../guides/resource-cleanup/)[Themes](../guides/themes/)[Client Side Functions](../guides/client-side-functions/)[View Api Page](../guides/view-api-page/)[Internationalization](../guides/internationalization/)

Chatbots

[Creating A Chatbot Fast](../guides/creating-a-chatbot-fast/)[Chatinterface Examples](../guides/chatinterface-examples/)[Agents And Tool Usage](../guides/agents-and-tool-usage/)[Creating A Custom Chatbot With Blocks](../guides/creating-a-custom-chatbot-with-blocks/)[Chatbot Specific Events](../guides/chatbot-specific-events/)[Creating A Discord Bot From A Gradio App](../guides/creating-a-discord-bot-from-a-gradio-app/)[Creating A Slack Bot From A Gradio App](../guides/creating-a-slack-bot-from-a-gradio-app/)[Creating A Website Widget From A Gradio Chatbot](../guides/creating-a-website-widget-from-a-gradio-chatbot/)

Data Science And Plots

[Creating Plots](../guides/creating-plots/)[Time Plots](../guides/time-plots/)[Filters Tables And Stats](../guides/filters-tables-and-stats/)[Connecting To A Database](../guides/connecting-to-a-database/)

Streaming

[Streaming Ai Generated Audio](../guides/streaming-ai-generated-audio/)[Object Detection From Webcam With Webrtc](../guides/object-detection-from-webcam-with-webrtc/)[Object Detection From Video](../guides/object-detection-from-video/)[Conversational Chatbot](../guides/conversational-chatbot/)[Real Time Speech Recognition](../guides/real-time-speech-recognition/)[Automatic Voice Detection](../guides/automatic-voice-detection/)

Custom Components

[Custom Components In Five Minutes](../guides/custom-components-in-five-minutes/)[Key Component Concepts](../guides/key-component-concepts/)[Configuration](../guides/configuration/)[Backend](../guides/backend/)[Frontend](../guides/frontend/)[Frequently Asked Questions](../guides/frequently-asked-questions/)[Pdf Component Example](../guides/pdf-component-example/)[Multimodal Chatbot Part1](../guides/multimodal-chatbot-part1/)[Documenting Custom Components](../guides/documenting-custom-components/)

Gradio Clients And Lite

[Getting Started With The Python Client](../guides/getting-started-with-the-python-client/)[Getting Started With The Js Client](../guides/getting-started-with-the-js-client/)[Querying Gradio Apps With Curl](../guides/querying-gradio-apps-with-curl/)[Gradio And Llm Agents](../guides/gradio-and-llm-agents/)[Fastapi App With The Gradio Client](../guides/fastapi-app-with-the-gradio-client/)

[Step 1: Write the Video Processing Function](#step-1-write-the-video-processing-function)[Step 2: Create a FastAPI app (Backend Routes)](#step-2-create-a-fast-api-app-backend-routes)[Step 3: Create a FastAPI app (Frontend Template)](#step-3-create-a-fast-api-app-frontend-template)[Step 4: Run your FastAPI app](#step-4-run-your-fast-api-app)

Mcp

[Building Mcp Server With Gradio](../guides/building-mcp-server-with-gradio/)[File Upload Mcp](../guides/file-upload-mcp/)[Building An Mcp Client With Gradio](../guides/building-an-mcp-client-with-gradio/)[Using Docs Mcp](../guides/using-docs-mcp/)

Other Tutorials [ show ]

[Using Hugging Face Integrations](../guides/using-hugging-face-integrations/)[Gradio And Comet](../guides/Gradio-and-Comet/)[Gradio And ONNX On Hugging Face](../guides/Gradio-and-ONNX-on-Hugging-Face/)[Gradio And Wandb Integration](../guides/Gradio-and-Wandb-Integration/)[Create Immersive Demo](../guides/create-immersive-demo/)[Create Your Own Friends With A Gan](../guides/create-your-own-friends-with-a-gan/)[Creating A Dashboard From Bigquery Data](../guides/creating-a-dashboard-from-bigquery-data/)[Creating A Dashboard From Supabase Data](../guides/creating-a-dashboard-from-supabase-data/)[Creating A Realtime Dashboard From Google Sheets](../guides/creating-a-realtime-dashboard-from-google-sheets/)[Deploying Gradio With Disco](../guides/deploying-gradio-with-disco/)[Deploying Gradio With Docker](../guides/deploying-gradio-with-docker/)[Deploying Gradio With Modal](../guides/deploying-gradio-with-modal/)[Developing Faster With Reload Mode](../guides/developing-faster-with-reload-mode/)[From Openapi Spec](../guides/from-openapi-spec/)[How To Use 3D Model Component](../guides/how-to-use-3D-model-component/)[Image Classification In Pytorch](../guides/image-classification-in-pytorch/)[Image Classification With Vision Transformers](../guides/image-classification-with-vision-transformers/)[Installing Gradio In A Virtual Environment](../guides/installing-gradio-in-a-virtual-environment/)[Named Entity Recognition](../guides/named-entity-recognition/)[Plot Component For Maps](../guides/plot-component-for-maps/)[Running Background Tasks](../guides/running-background-tasks/)[Running Gradio On Your Web Server With Nginx](../guides/running-gradio-on-your-web-server-with-nginx/)[Setting Up A Demo For Maximum Performance](../guides/setting-up-a-demo-for-maximum-performance/)[Styling The Gradio Dataframe](../guides/styling-the-gradio-dataframe/)[Theming Guide](../guides/theming-guide/)[Understanding Gradio Share Links](../guides/understanding-gradio-share-links/)[Using Flagging](../guides/using-flagging/)[Using Gradio For Tabular Workflows](../guides/using-gradio-for-tabular-workflows/)[Using Gradio In Other Programming Languages](../guides/using-gradio-in-other-programming-languages/)[Wrapping Layouts](../guides/wrapping-layouts/)

1. Gradio Clients And Lite
2. Fastapi App With The Gradio Client

[‚Üê

Gradio And Llm Agents](../guides/gradio-and-llm-agents/) [Building Mcp Server With Gradio

‚Üí](../guides/building-mcp-server-with-gradio/)

# Building a Web App with the Gradio Python Client

In this blog post, we will demonstrate how to use the `gradio_client` [Python library](getting-started-with-the-python-client/), which enables developers to make requests to a Gradio app programmatically, by creating an end-to-end example web app using FastAPI. The web app we will be building is called "Acapellify," and it will allow users to upload video files as input and return a version of that video without instrumental music. It will also display a gallery of generated videos.

**Prerequisites**

Before we begin, make sure you are running Python 3.9 or later, and have the following libraries installed:

* `gradio_client`
* `fastapi`
* `uvicorn`

You can install these libraries from `pip`:

```
$ pip install gradio_client fastapi uvicorn
```

You will also need to have ffmpeg installed. You can check to see if you already have ffmpeg by running in your terminal:

```
$ ffmpeg version
```

Otherwise, install ffmpeg [by following these instructions](https://www.hostinger.com/tutorials/how-to-install-ffmpeg).

## Step 1: Write the Video Processing Function[![](data:image/svg+xml...)](#step-1-write-the-video-processing-function)

Let's start with what seems like the most complex bit -- using machine learning to remove the music from a video.

Luckily for us, there's an existing Space we can use to make this process easier: <https://huggingface.co/spaces/abidlabs/music-separation>. This Space takes an audio file and produces two separate audio files: one with the instrumental music and one with all other sounds in the original clip. Perfect to use with our client!

Open a new Python file, say `main.py`, and start by importing the `Client` class from `gradio_client` and connecting it to this Space:

```
from gradio_client import Client, handle_file

client = Client("abidlabs/music-separation")

def acapellify(audio_path):
    result = client.predict(handle_file(audio_path), api_name="/predict")
    return result[0]
```

That's all the code that's needed -- notice that the API endpoints returns two audio files (one without the music, and one with just the music) in a list, and so we just return the first element of the list.

---

**Note**: since this is a public Space, there might be other users using this Space as well, which might result in a slow experience. You can duplicate this Space with your own [Hugging Face token](https://huggingface.co/settings/tokens) and create a private Space that only you have will have access to and bypass the queue. To do that, simply replace the first two lines above with:

```
from gradio_client import Client

client = Client.duplicate("abidlabs/music-separation", hf_token=YOUR_HF_TOKEN)
```

Everything else remains the same!

---

Now, of course, we are working with video files, so we first need to extract the audio from the video files. For this, we will be using the `ffmpeg` library, which does a lot of heavy lifting when it comes to working with audio and video files. The most common way to use `ffmpeg` is through the command line, which we'll call via Python's `subprocess` module:

Our video processing workflow will consist of three steps:

1. First, we start by taking in a video filepath and extracting the audio using `ffmpeg`.
2. Then, we pass in the audio file through the `acapellify()` function above.
3. Finally, we combine the new audio with the original video to produce a final acapellified video.

Here's the complete code in Python, which you can add to your `main.py` file:

```
import subprocess

def process_video(video_path):
    old_audio = os.path.basename(video_path).split(".")[0] + ".m4a"
    subprocess.run(['ffmpeg', '-y', '-i', video_path, '-vn', '-acodec', 'copy', old_audio])

    new_audio = acapellify(old_audio)

    new_video = f"acap_{video_path}"
    subprocess.call(['ffmpeg', '-y', '-i', video_path, '-i', new_audio, '-map', '0:v', '-map', '1:a', '-c:v', 'copy', '-c:a', 'aac', '-strict', 'experimental', f"static/{new_video}"])
    return new_video
```

You can read up on [ffmpeg documentation](https://ffmpeg.org/ffmpeg.html) if you'd like to understand all of the command line parameters, as they are beyond the scope of this tutorial.

## Step 2: Create a FastAPI app (Backend Routes)[![](data:image/svg+xml...)](#step-2-create-a-fast-api-app-backend-routes)

Next up, we'll create a simple FastAPI app. If you haven't used FastAPI before, check out [the great FastAPI docs](https://fastapi.tiangolo.com/). Otherwise, this basic template, which we add to `main.py`, will look pretty familiar:

```
import os
from fastapi import FastAPI, File, UploadFile, Request
from fastapi.responses import HTMLResponse, RedirectResponse
from fastapi.staticfiles import StaticFiles
from fastapi.templating import Jinja2Templates

app = FastAPI()
os.makedirs("static", exist_ok=True)
app.mount("/static", StaticFiles(directory="static"), name="static")
templates = Jinja2Templates(directory="templates")

videos = []

@app.get("/", response_class=HTMLResponse)
async def home(request: Request):
    return templates.TemplateResponse(
        "home.html", {"request": request, "videos": videos})

@app.post("/uploadvideo/")
async def upload_video(video: UploadFile = File(...)):
    video_path = video.filename
    with open(video_path, "wb+") as fp:
        fp.write(video.file.read())

    new_video = process_video(video.filename)
    videos.append(new_video)
    return RedirectResponse(url='/', status_code=303)
```

In this example, the FastAPI app has two routes: `/` and `/uploadvideo/`.

The `/` route returns an HTML template that displays a gallery of all uploaded videos.

The `/uploadvideo/` route accepts a `POST` request with an `UploadFile` object, which represents the uploaded video file. The video file is "acapellified" via the `process_video()` method, and the output video is stored in a list which stores all of the uploaded videos in memory.

Note that this is a very basic example and if this were a production app, you will need to add more logic to handle file storage, user authentication, and security considerations.

## Step 3: Create a FastAPI app (Frontend Template)[![](data:image/svg+xml...)](#step-3-create-a-fast-api-app-frontend-template)

Finally, we create the frontend of our web application. First, we create a folder called `templates` in the same directory as `main.py`. We then create a template, `home.html` inside the `templates` folder. Here is the resulting file structure:

```
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îî‚îÄ‚îÄ home.html
```

Write the following as the contents of `home.html`:

```
&lt;!DOCTYPE html> &lt;html> &lt;head> &lt;title>Video Gallery&lt;/title>
&lt;style> body { font-family: sans-serif; margin: 0; padding: 0;
background-color: #f5f5f5; } h1 { text-align: center; margin-top: 30px;
margin-bottom: 20px; } .gallery { display: flex; flex-wrap: wrap;
justify-content: center; gap: 20px; padding: 20px; } .video { border: 2px solid
#ccc; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2); border-radius: 5px; overflow:
hidden; width: 300px; margin-bottom: 20px; } .video video { width: 100%; height:
200px; } .video p { text-align: center; margin: 10px 0; } form { margin-top:
20px; text-align: center; } input[type="file"] { display: none; } .upload-btn {
display: inline-block; background-color: #3498db; color: #fff; padding: 10px
20px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
.upload-btn:hover { background-color: #2980b9; } .file-name { margin-left: 10px;
} &lt;/style> &lt;/head> &lt;body> &lt;h1>Video Gallery&lt;/h1> {% if videos %}
&lt;div class="gallery"> {% for video in videos %} &lt;div class="video">
&lt;video controls> &lt;source src="{{ url_for('static', path=video) }}"
type="video/mp4"> Your browser does not support the video tag. &lt;/video>
&lt;p>{{ video }}&lt;/p> &lt;/div> {% endfor %} &lt;/div> {% else %} &lt;p>No
videos uploaded yet.&lt;/p> {% endif %} &lt;form action="/uploadvideo/"
method="post" enctype="multipart/form-data"> &lt;label for="video-upload"
class="upload-btn">Choose video file&lt;/label> &lt;input type="file"
name="video" id="video-upload"> &lt;span class="file-name">&lt;/span> &lt;button
type="submit" class="upload-btn">Upload&lt;/button> &lt;/form> &lt;script> //
Display selected file name in the form const fileUpload =
document.getElementById("video-upload"); const fileName =
document.querySelector(".file-name"); fileUpload.addEventListener("change", (e)
=> { fileName.textContent = e.target.files[0].name; }); &lt;/script> &lt;/body>
&lt;/html>
```

## Step 4: Run your FastAPI app[![](data:image/svg+xml...)](#step-4-run-your-fast-api-app)

Finally, we are ready to run our FastAPI app, powered by the Gradio Python Client!

Open up a terminal and navigate to the directory containing `main.py`. Then run the following command in the terminal:

```
$ uvicorn main:app
```

You should see an output that looks like this:

```
Loaded as API: https://abidlabs-music-separation.hf.space ‚úî
INFO:     Started server process [1360]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

And that's it! Start uploading videos and you'll get some "acapellified" videos in response (might take seconds to minutes to process depending on the length of your videos). Here's how the UI looks after uploading two videos:

![](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/gradio-guides/acapellify.png)

If you'd like to learn more about how to use the Gradio Python Client in your projects, [read the dedicated Guide](/guides/getting-started-with-the-python-client/).

[‚Üê

Gradio And Llm Agents](../guides/gradio-and-llm-agents/) [Building Mcp Server With Gradio

‚Üí](../guides/building-mcp-server-with-gradio/)

[![Gradio logo](/_app/immutable/assets/gradio.CHB5adID.svg)](/)

[Status](https://status.gradio.app) [![Twitter logo](data:image/svg+xml...)](https://twitter.com/Gradio) [![Github logo](data:image/svg+xml...)](https://github.com/gradio-app/gradio)